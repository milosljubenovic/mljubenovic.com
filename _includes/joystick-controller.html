<!-- NES-Style Controller -->
<div class="joystick-controller relative inline-block">
  <!-- Controller Body -->
  <div class="relative" style="width: 520px; height: 240px;">
    <!-- Outer Light Gray Shell -->
    <div class="absolute inset-0 bg-gradient-to-b from-gray-300 to-gray-400 rounded-2xl shadow-2xl" style="border: 3px solid #9ca3af;"></div>
    
    <!-- Main Dark Panel -->
    <div class="absolute" style="left: 20px; top: 50px; right: 20px; height: 160px; background: linear-gradient(135deg, #1f2937 0%, #111827 100%); border-radius: 12px; border: 2px solid #374151;">
      
      <!-- Nintendo Logo -->
      <div class="absolute top-4 right-6" style="font-family: 'Arial Black', sans-serif; font-size: 18px; font-weight: 900; color: #dc2626; letter-spacing: 1px;">
        Nintendo<sup style="font-size: 10px;">Â®</sup>
      </div>
      
      <!-- D-Pad Section -->
      <div class="absolute left-8 top-1/2 -translate-y-1/2">
        <div class="relative" style="width: 80px; height: 80px;">
          <!-- D-Pad outer border -->
          <div class="absolute" style="left: 50%; top: 50%; transform: translate(-50%, -50%);">
            <!-- Vertical bar border -->
            <div class="absolute" style="left: 50%; top: 50%; transform: translate(-50%, -50%); width: 28px; height: 68px; background: #e5e7eb; border-radius: 3px;"></div>
            <!-- Horizontal bar border -->
            <div class="absolute" style="left: 50%; top: 50%; transform: translate(-50%, -50%); width: 68px; height: 28px; background: #e5e7eb; border-radius: 3px;"></div>
            
            <!-- Vertical bar -->
            <div class="absolute" style="left: 50%; top: 50%; transform: translate(-50%, -50%); width: 24px; height: 64px; background: linear-gradient(135deg, #374151 0%, #1f2937 100%); border-radius: 2px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);"></div>
            <!-- Horizontal bar -->
            <div class="absolute" style="left: 50%; top: 50%; transform: translate(-50%, -50%); width: 64px; height: 24px; background: linear-gradient(135deg, #374151 0%, #1f2937 100%); border-radius: 2px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);"></div>
            
            <!-- Up Button -->
            <button id="dpad-up" class="dpad-btn absolute" style="left: 50%; top: 0; transform: translateX(-50%); width: 24px; height: 22px;" aria-label="D-Pad Up"></button>
            
            <!-- Down Button -->
            <button id="dpad-down" class="dpad-btn absolute" style="left: 50%; bottom: 0; transform: translateX(-50%); width: 24px; height: 22px;" aria-label="D-Pad Down"></button>
            
            <!-- Left Button -->
            <button id="dpad-left" class="dpad-btn absolute" style="left: 0; top: 50%; transform: translateY(-50%); width: 22px; height: 24px;" aria-label="D-Pad Left"></button>
            
            <!-- Right Button -->
            <button id="dpad-right" class="dpad-btn absolute" style="right: 0; top: 50%; transform: translateY(-50%); width: 22px; height: 24px;" aria-label="D-Pad Right"></button>
            
            <!-- Center circle -->
            <div class="absolute" style="left: 50%; top: 50%; transform: translate(-50%, -50%); width: 10px; height: 10px; background: #000; border-radius: 50%;"></div>
          </div>
        </div>
      </div>
      
      <!-- Center Section with SELECT/START and Controller Ports -->
      <div class="absolute left-1/2 -translate-x-1/2 top-8" style="width: 180px;">
        <!-- Gray bars at top -->
        <div class="flex flex-col gap-1 mb-3">
          <div style="height: 12px; background: linear-gradient(to bottom, #d1d5db, #9ca3af); border-radius: 6px; box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);"></div>
          <div style="height: 12px; background: linear-gradient(to bottom, #d1d5db, #9ca3af); border-radius: 6px; box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);"></div>
        </div>
        
        <!-- SELECT START Label -->
        <div class="text-center mb-2" style="font-family: 'Arial', sans-serif; font-size: 11px; font-weight: 700; color: #dc2626; letter-spacing: 3px;">
          SELECT START
        </div>
        
        <!-- SELECT and START Buttons -->
        <div class="flex justify-center gap-4 mb-3">
          <button id="btn-select" class="start-select-btn" style="width: 48px; height: 16px; background: linear-gradient(to bottom, #374151, #1f2937); border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1); border: 1px solid #000; transform: rotate(-25deg);" aria-label="Select"></button>
          
          <button id="btn-start" class="start-select-btn" style="width: 48px; height: 16px; background: linear-gradient(to bottom, #374151, #1f2937); border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1); border: 1px solid #000; transform: rotate(-25deg);" aria-label="Start"></button>
        </div>
        
        <!-- Controller Ports (decorative) -->
        <div class="flex justify-center gap-3">
          <div style="width: 60px; height: 18px; background: linear-gradient(to bottom, #e5e7eb, #d1d5db); border-radius: 4px; border: 2px solid #9ca3af; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);">
            <div class="flex gap-1 justify-center items-center h-full">
              <div style="width: 8px; height: 10px; background: #1f2937; border-radius: 1px;"></div>
              <div style="width: 8px; height: 10px; background: #1f2937; border-radius: 1px;"></div>
            </div>
          </div>
          <div style="width: 60px; height: 18px; background: linear-gradient(to bottom, #e5e7eb, #d1d5db); border-radius: 4px; border: 2px solid #9ca3af; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);">
            <div class="flex gap-1 justify-center items-center h-full">
              <div style="width: 8px; height: 10px; background: #1f2937; border-radius: 1px;"></div>
              <div style="width: 8px; height: 10px; background: #1f2937; border-radius: 1px;"></div>
            </div>
          </div>
        </div>
        
        <!-- Bottom gray bar -->
        <div class="mt-3" style="height: 12px; background: linear-gradient(to bottom, #d1d5db, #9ca3af); border-radius: 6px; box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);"></div>
      </div>
      
      <!-- B and A Buttons (Right Side) -->
      <div class="absolute right-8 top-1/2 -translate-y-1/2 flex gap-6">
        <!-- B Button with border -->
        <div class="relative">
          <div style="width: 54px; height: 54px; background: linear-gradient(to bottom, #e5e7eb, #d1d5db); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 6px rgba(0,0,0,0.3);">
            <button id="btn-b" class="action-btn" style="width: 48px; height: 48px; background: radial-gradient(circle at 30% 30%, #dc2626, #991b1b); border-radius: 50%; box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-weight: 900; color: #7f1d1d; font-size: 18px; font-family: 'Arial Black', sans-serif;" aria-label="B Button">
              B
            </button>
          </div>
        </div>
        
        <!-- A Button with border -->
        <div class="relative">
          <div style="width: 54px; height: 54px; background: linear-gradient(to bottom, #e5e7eb, #d1d5db); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 6px rgba(0,0,0,0.3);">
            <button id="btn-a" class="action-btn" style="width: 48px; height: 48px; background: radial-gradient(circle at 30% 30%, #dc2626, #991b1b); border-radius: 50%; box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-weight: 900; color: #7f1d1d; font-size: 18px; font-family: 'Arial Black', sans-serif;" aria-label="A Button">
              A
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Cable connector (top) with extended wire -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2" style="width: 80px; height: 16px; background: linear-gradient(to bottom, #4b5563, #374151); border-radius: 0 0 8px 8px; border: 2px solid #1f2937; border-top: none; z-index: 5;"></div>
    
    <!-- Wire extending upward -->
    <div class="absolute left-1/2 -translate-x-1/2 bg-gradient-to-b from-gray-500 to-gray-600" style="top: -80px; width: 8px; height: 80px; border-radius: 4px; box-shadow: inset 0 0 3px rgba(0,0,0,0.5), 2px 2px 4px rgba(0,0,0,0.3);"></div>
    <div class="absolute left-1/2 -translate-x-1/2 bg-gray-400" style="top: -80px; width: 6px; height: 80px; border-radius: 3px; opacity: 0.3;"></div>
  </div>
  
  <!-- Shadow -->
  <div class="absolute -bottom-4 left-1/2 -translate-x-1/2" style="width: 500px; height: 20px; background: radial-gradient(ellipse, rgba(0,0,0,0.3), transparent); filter: blur(8px);"></div>
</div>

<style>
  /* Button press animations */
  .dpad-btn {
    cursor: pointer;
    transition: all 0.1s ease;
    position: absolute;
    background: transparent;
    border: none;
    outline: none;
  }
  
  .dpad-btn:hover {
    filter: brightness(1.1);
  }
  
  .dpad-btn:active {
    filter: brightness(0.8);
    transform: scale(0.95);
  }
  
  .action-btn {
    cursor: pointer;
    transition: all 0.1s ease;
    border: none;
    outline: none;
  }
  
  .action-btn:hover {
    filter: brightness(1.1);
    transform: scale(1.02);
  }
  
  .action-btn:active {
    filter: brightness(0.9);
    transform: scale(0.96);
    box-shadow: inset 0 3px 6px rgba(0,0,0,0.5), inset 0 1px 2px rgba(255,255,255,0.1) !important;
  }
  
  .start-select-btn {
    cursor: pointer;
    transition: all 0.1s ease;
    border: none;
    outline: none;
  }
  
  .start-select-btn:hover {
    filter: brightness(1.1);
  }
  
  .start-select-btn:active {
    filter: brightness(0.8);
    transform: scale(0.95) rotate(-25deg);
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.5) !important;
  }
  
  /* Prevent text selection on buttons */
  .joystick-controller button {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
  }
  
  /* Sharp pixel rendering */
  .joystick-controller {
    image-rendering: crisp-edges;
    image-rendering: -moz-crisp-edges;
    image-rendering: -webkit-optimize-contrast;
  }
</style>

<script>
  // Joystick Controller Logic
  document.addEventListener('DOMContentLoaded', function() {
    // Helper function to add visual feedback
    function buttonFeedback(button) {
      button.classList.add('ring-2', 'ring-white', 'ring-opacity-50');
      setTimeout(() => {
        button.classList.remove('ring-2', 'ring-white', 'ring-opacity-50');
      }, 200);
    }
    
    // D-Pad Controls
    document.getElementById('dpad-up')?.addEventListener('click', function() {
      console.log('D-Pad Up pressed');
      buttonFeedback(this);
      // Reserved for future features
    });
    
    document.getElementById('dpad-down')?.addEventListener('click', function() {
      console.log('D-Pad Down pressed');
      buttonFeedback(this);
      // Reserved for future features
    });
    
    document.getElementById('dpad-left')?.addEventListener('click', function() {
      console.log('D-Pad Left pressed - Rewind');
      buttonFeedback(this);
      const event = new CustomEvent('timelineControl', { detail: { action: 'rewind' } });
      document.dispatchEvent(event);
    });
    
    document.getElementById('dpad-right')?.addEventListener('click', function() {
      console.log('D-Pad Right pressed - Forward');
      buttonFeedback(this);
      const event = new CustomEvent('timelineControl', { detail: { action: 'forward' } });
      document.dispatchEvent(event);
    });
    
    // Action Buttons
    document.getElementById('btn-a')?.addEventListener('click', function() {
      console.log('A Button pressed - Next/Continue');
      buttonFeedback(this);
      const event = new CustomEvent('timelineControl', { detail: { action: 'toggle' } });
      document.dispatchEvent(event);
    });
    
    document.getElementById('btn-b')?.addEventListener('click', function() {
      console.log('B Button pressed - Reset');
      buttonFeedback(this);
      const event = new CustomEvent('timelineControl', { detail: { action: 'reset' } });
      document.dispatchEvent(event);
    });
    
    // Start/Select Buttons
    document.getElementById('btn-start')?.addEventListener('click', function() {
      console.log('Start Button pressed - Begin Journey');
      buttonFeedback(this);
      const event = new CustomEvent('timelineControl', { detail: { action: 'start' } });
      document.dispatchEvent(event);
    });
    
    document.getElementById('btn-select')?.addEventListener('click', function() {
      console.log('Select Button pressed - Toggle Speed');
      buttonFeedback(this);
      const event = new CustomEvent('timelineControl', { detail: { action: 'speed' } });
      document.dispatchEvent(event);
    });
  });
</script>
